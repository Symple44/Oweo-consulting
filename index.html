<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oweo - Expert ERP Charpente M√©tallique</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- ========================================
         CSS TEMPLATE SYSTEM OWEO
         ======================================== -->
    
    <link rel="stylesheet" href="css/template-variables.css">
    <link rel="stylesheet" href="css/template-utilities.css">
    <link rel="stylesheet" href="css/template-navigation.css">
    <link rel="stylesheet" href="css/template-modals.css">
    <link rel="stylesheet" href="css/template-components.css">
    <link rel="stylesheet" href="css/template-pages.css">
    <link rel="stylesheet" href="css/template-demos.css">
    
    <!-- ========================================
         BIBLIOTH√àQUES EXTERNES
         ======================================== -->
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
    
    <meta name="description" content="Oweo - Solutions ERP sp√©cialis√©es pour la charpente m√©tallique. Outils de chiffrage, gestion de projets et int√©gration DSTV.">
</head>
<body>
    <!-- Navigation -->
    <nav id="navbar" class="navbar"></nav>
    
    <!-- Demo Search Banner -->
    <div id="demo-search-banner" class="demo-search-banner" style="display: none;">
        <div class="demo-search-container">
            <div class="demo-search-content">
                <div class="demo-search-brand">
                    <i class="fas fa-search"></i>
                    <span>Navigation D√©mos</span>
                </div>
                <div class="demo-search-input-container">
                    <input 
                        type="text" 
                        id="demo-search-input" 
                        class="demo-search-input" 
                        placeholder="Rechercher une d√©mo ou fonctionnalit√©..."
                        autocomplete="off">
                    <div id="demo-search-results" class="demo-search-results"></div>
                </div>
                <div class="demo-search-actions">
                    <button id="demo-search-help" class="demo-search-help-btn" title="Aide">
                        <i class="fas fa-question-circle"></i>
                    </button>
                    <button id="demo-search-close" class="demo-search-close-btn" title="Fermer">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Conteneur principal -->
    <main id="app" class="app-container">
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <p class="loading-text">Chargement de l'application...</p>
        </div>
    </main>
    
    <!-- Footer -->
    <footer id="footer" class="footer"></footer>
    
    <!-- Conteneurs pour les modales et notifications -->
    <div id="modals-container" class="modals-container"></div>
    <div id="notifications-container" class="notifications-container"></div>

    <!-- ========================================
         SCRIPTS JAVASCRIPT
         ======================================== -->
    
    <!-- Core System -->
    <script src="js/core/event-bus.js"></script>
    <script src="js/core/component-manager.js"></script>
    
    <!-- Utilities -->
    <script src="js/utils/dom-utils.js"></script>
    <script src="js/utils/animation-utils.js"></script>
    <script src="js/utils/client-access.js"></script>
    <script src="js/config/company-info.js"></script>
    
    <!-- Template System -->
    <script src="js/config/template-config.js"></script>
    <script src="js/components/template-manager.js"></script>
    
    <!-- Base Components -->
    <script src="js/components/base-component.js"></script>
    <script src="js/pages/base-page.js"></script>
    <script src="js/demos/base-demo.js"></script>
    
    <!-- Core Application -->
    <script src="js/core/router.js"></script>
    <script src="js/core/app.js"></script>
    
    <!-- UI Components -->
    <script src="js/components/navbar.js"></script>
    <script src="js/components/footer.js"></script>
    <script src="js/components/demo-search.js"></script>
    <script src="js/components/modal.js"></script>
    
    <!-- Pages -->
    <script src="js/pages/home.js"></script>
    <script src="js/pages/services.js"></script>
    <script src="js/pages/demos.js"></script>
    <script src="js/pages/contact.js"></script>
    <script src="js/pages/cgv.js"></script>
    
    <!-- Demo Applications -->
    <script src="js/demos/chiffrage-demo.js"></script>
    <script src="js/demos/dstv-demo.js"></script>
    
    <!-- Configuration -->
    <script src="js/config/demo-config.js"></script>
    <script src="js/config/app-config.js"></script>
    
    <!-- Biblioth√®ques externes -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>
    
    <!-- ========================================
         INITIALISATION APPLICATION
         ======================================== -->
    
    <script>
        // Configuration globale
        window.OWEO_CONFIG = {
            version: '1.0.0',
            environment: window.location.hostname === 'localhost' ? 'development' : 'production',
            features: {
                templateSystem: true,
                themeSelector: true,
                devTools: window.location.hostname === 'localhost'
            }
        };
        
        // Initialisation de l'application
        function initializeOweoApp() {
            try {
                console.log('üîç V√©rification des d√©pendances...');
                
                const requiredClasses = [
                    'EventBus', 'ComponentManager', 'DOMUtils', 'AnimationUtils',
                    'BaseComponent', 'OweoRouter', 'OweoApp'
                ];
                
                const missingClasses = requiredClasses.filter(className => 
                    typeof window[className] === 'undefined'
                );
                
                if (missingClasses.length > 0) {
                    console.error('‚ùå Classes manquantes:', missingClasses);
                    
                    setTimeout(() => {
                        const stillMissing = requiredClasses.filter(className => 
                            typeof window[className] === 'undefined'
                        );
                        
                        if (stillMissing.length > 0) {
                            document.getElementById('app').innerHTML = `
                                <div class="error-container" style="
                                    display: flex;
                                    flex-direction: column;
                                    align-items: center;
                                    justify-content: center;
                                    height: 50vh;
                                    text-align: center;
                                    padding: 2rem;
                                ">
                                    <h2 style="color: #dc3545; margin-bottom: 1rem;">‚ùå Erreur de chargement</h2>
                                    <p style="margin-bottom: 1rem; color: #666;">
                                        Classes manquantes: ${stillMissing.join(', ')}
                                    </p>
                                    <button onclick="location.reload()" style="
                                        padding: 0.5rem 1rem;
                                        background: #007bff;
                                        color: white;
                                        border: none;
                                        border-radius: 4px;
                                        cursor: pointer;
                                    ">
                                        Recharger la page
                                    </button>
                                </div>
                            `;
                            return;
                        }
                        
                        startApp();
                    }, 500);
                    
                    return;
                }
                
                startApp();
                
            } catch (error) {
                console.error('üí• Erreur lors de l\'initialisation:', error);
                document.getElementById('app').innerHTML = `
                    <div class="error-container" style="
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        height: 50vh;
                        text-align: center;
                        padding: 2rem;
                    ">
                        <h2 style="color: #dc3545; margin-bottom: 1rem;">üí• Erreur critique</h2>
                        <p style="margin-bottom: 1rem; color: #666;">${error.message}</p>
                        <button onclick="location.reload()" style="
                            padding: 0.5rem 1rem;
                            background: #007bff;
                            color: white;
                            border: none;
                            border-radius: 4px;
                            cursor: pointer;
                        ">
                            Recharger la page
                        </button>
                    </div>
                `;
            }
        }
        
        function startApp() {
            console.log('‚úÖ Toutes les d√©pendances charg√©es');
            
            if (typeof window.OweoApp !== 'undefined') {
                console.log('üöÄ Lancement de l\'application...');
                window.app = new window.OweoApp();
                window.app.init();
                
                const loadTime = Math.round(performance.now());
                console.log(`‚ö° Oweo charg√© en ${loadTime}ms`);
            } else {
                console.error('‚ùå OweoApp introuvable');
            }
        }
        
        // Initialisation au chargement du DOM
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeOweoApp);
        } else {
            initializeOweoApp();
        }
        
        // Gestion des erreurs globales
        window.addEventListener('error', (event) => {
            if (window.OWEO_CONFIG.environment === 'development') {
                console.error('üî• Erreur JavaScript:', event.error);
            }
        });
        
        window.addEventListener('unhandledrejection', (event) => {
            if (window.OWEO_CONFIG.environment === 'development') {
                console.error('üî• Promise rejet√©e:', event.reason);
            }
        });
    </script>
</body>
</html>